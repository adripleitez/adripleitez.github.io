(this.webpackJsonpari=this.webpackJsonpari||[]).push([[0],{240:function(e,t,a){},248:function(e,t){},250:function(e,t){},263:function(e,t){},265:function(e,t){},293:function(e,t){},295:function(e,t){},296:function(e,t){},301:function(e,t){},303:function(e,t){},309:function(e,t){},311:function(e,t){},330:function(e,t){},342:function(e,t){},345:function(e,t){},432:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(32),c=a.n(r),i=(a(240),a(1)),s=a(6),o=a(18),l=a(31),d=a(3),j=a(13),u=a(14),f=a(15),h=a(16),m=(a(241),a(439));function b(e,t){for(var a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=e.length,c=t.length,i=[],s=0;s<c;s++)for(var o=0;o<n;o++)t[s]===a[o]&&(i[s]=o);function l(e,t){for(var a=e;a<0;)a+=t;return a}for(var d=[],j=0;j<r;j++){for(var u,f=0;f<n;f++)e[j]===a[f]&&(u=f);d[j]=a[l(u-i[j%c],n)]}for(var h="",m=0;m<r;m++)h+=d[m];return h+"\n"}var p=a(80),O=a(232),g=a(147),x=a.n(g),v=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t,a){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.sign({data:t},a,{expiresIn:"2h"}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t,a){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",x.a.verify(t,a));case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,a){return e.apply(this,arguments)}}(),N=a(435),w=a(438),S=a(436),k=a(437),T=a(440),C=a(83),J=a(441),F=a(7),E=N.a.Dragger,X={key:"",ciphed:[],txt:"",infoFile:"",myfile:null,infoGenerated:"",jwt:{},delimeter:";",flag:!1,jwtRes:"",error:"ERROR"},H={name:"file",accept:".txt, .json, .xml",multiple:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},A=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).changeHandler=function(e){n.setState(Object(d.a)({},e.target.id,e.target.value))},n.uploadingFile=function(e){var t=e.file.status;if("done"===t){var a=new FileReader;a.onload=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.result,n.state.infoFile=a;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(e.file.originFileObj),O.b.success("".concat(e.file.name," archivo subido exitosamente."))}else"error"===t&&O.b.error("".concat(e.file.name," error de subida."))},n.convertTXTtoXML=function(e){if(""!==e){var t="    <cliente>\n",a=0,r=["<documento>","</documento>","<primer-nombre>","</primer-nombre>","<apellido>","</apellido>","<credit-card>","</credit-card>","<tipo>","</tipo>","<telefono>","</telefono>"],c=e.split(n.state.delimeter),i=parseInt(c.length/(r.length/2));if(i>0)for(var o=0;o<i;o++)r=[].concat(Object(s.a)(r),Object(s.a)(r));c.forEach((function(e,i){if("<credit-card>"===r[a])if(""===n.state.key)t+="        "+r[a]+e.trim()+r[a+1]+"\n";else{var s=function(e,t){for(var a="abcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=e.length,c=t.length,i=[],s=0;s<c;s++)for(var o=0;o<n;o++)t[s]===a[o]&&(i[s]=o);for(var l=[],d=0;d<r;d++){for(var j,u=0;u<n;u++)e[d]===a[u]&&(j=u);l[d]=a[(i[d%c]+j)%n]}for(var f="",h=0;h<r;h++)f+=l[h];return f}(e,n.state.key);n.state.ciphed.push(s),t+="        "+r[a]+s+r[a+1]+"\n"}else i===c.length-1?""!==e.trim()&&(t+="        "+r[a]+e.trim()+r[a+1]+"\n"):t+=(i+1)%6===0?"        "+r[a]+e.trim()+r[a+1]+"\n    </cliente>\n    <cliente>\n":"        "+r[a]+e.trim()+r[a+1]+"\n";a+=2}));var l="<clientes>\n"+t+"    </cliente>\n</clientes>";n.setState({xml:l,infoGenerated:l})}else n.setState({error:"El archivo est\xe1 vac\xedo",flag2:!0})},n.convertTXTtoJSON=function(e){if(""!==e){var t=[],a={},r=["documento","primer-nombre","apellido","credit-card","tipo","telefono"],c=e.split(n.state.delimeter),i=parseInt(c.length/r.length);if(i>0)for(var o=0;o<i;o++)r=[].concat(Object(s.a)(r),Object(s.a)(r));c.forEach((function(e,n){"documento"===r[n]&&(a={}),n===c.length-1?""!==e.trim()&&(a[r[n]]=e.trim()):a[r[n]]=e.trim(),("telefono"===r[n]||n===c.length-1&&""!==e.trim())&&t.push(a)})),n.setState({json:t,infoGenerated:JSON.stringify(t)}),""!==n.state.key?v(a,n.state.key).then((function(e){localStorage.setItem("jwtSesion",e),n.setState({jwt:e})})):n.setState({alert:!0})}else n.setState({error:"El archivo est\xe1 vac\xedo",flag2:!0})},n.submitHandler=function(e,t){var a;if(e.preventDefault(),"descargarXml"===t){for(var r=n.state.xml,c=0;c<n.state.ciphed.length;c++)r=r.replace(n.state.ciphed[c],b(n.state.ciphed[c],n.state.key).trim());a=new File([r],"xml-file-downloaded.xml",{type:"application/xml"})}else"descargarJson"===t&&(a=new File([JSON.stringify(n.state.json)],"json-file-downloaded.json",{type:"application/json"}));Object(p.saveAs)(a)},n.decipheredHandler=function(e){e.preventDefault();var t=[];n.state.ciphed.forEach((function(e){t.push(b(e,n.state.key))})),n.setState({displayCifrado:t})},n.jwtValidation=function(e){e.preventDefault(),localStorage.getItem("jwtSesion")&&n.setState({jwt:localStorage.getItem("jwtSesion")}),""!==n.state.jwt&&y(n.state.jwt.toString(),n.state.key).then((function(e){null!=e.data?n.setState({jwtRes:e.data,flag:!0}):n.setState({flag2:!0})}))},n.state=Object(i.a)({},X),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(F.jsxs)("div",{className:"App",children:[this.state.flag&&Object(F.jsx)(w.a,{message:"Jason web token validado exitosamente",description:JSON.stringify(this.state.jwtRes),type:"success",showIcon:!0,closable:!0}),this.state.flag2&&Object(F.jsx)(w.a,{message:"Ha ocurrido un error",description:this.state.error,type:"error",showIcon:!0,closable:!0}),Object(F.jsxs)("header",{className:"App-header",children:[Object(F.jsxs)(E,Object(i.a)(Object(i.a)({},H),{},{onChange:function(t){return e.uploadingFile(t)},children:[Object(F.jsx)("p",{className:"ant-upload-drag-icon",children:Object(F.jsx)(J.a,{})}),Object(F.jsx)("p",{className:"ant-upload-text",children:"Haz click aqu\xed para depositar tu archivo"}),Object(F.jsx)("p",{className:"ant-upload-hint",children:"Solo se permiten archivos .txt .xml o .json"})]})),Object(F.jsxs)(m.a,{className:"form",children:[Object(F.jsxs)("div",{className:"row",children:[Object(F.jsxs)("div",{className:"col",children:[Object(F.jsx)("p",{className:"p-text",children:"Delimitador:"}),Object(F.jsx)(S.a,{maxLength:1,id:"delimeter",placeholder:"delimeter",onChange:this.changeHandler,value:this.state.delimeter})]}),Object(F.jsxs)("div",{className:"col",children:[Object(F.jsx)("p",{className:"p-text",children:"Llave de cifrado:"}),Object(F.jsx)(S.a,{id:"key",placeholder:"llave de cifrado",onChange:this.changeHandler,value:this.state.key.toLowerCase()})]})]}),Object(F.jsxs)(k.a,{justify:"center",gutter:30,children:[Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",id:"generateXml",onClick:function(){return e.convertTXTtoXML(e.state.infoFile)},children:"General XML"})}),Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",id:"descargarXml",onClick:function(t){return e.submitHandler(t,"descargarXml")},children:"Descargar XML "})})]}),Object(F.jsxs)(k.a,{justify:"center",gutter:30,children:[Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",id:"generateJson",onClick:function(){return e.convertTXTtoJSON(e.state.infoFile)},children:"Generar JSON"})}),Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",id:"descargarJson",onClick:function(t){return e.submitHandler(t,"descargarJson")},children:"Descargar JSON"})})]}),Object(F.jsxs)(k.a,{justify:"center",gutter:30,children:[Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",onClick:function(){return function(e,t){var a={};try{a=JSON.parse(e)}catch(s){return void O.b.error("El texto leido no es un JSON")}var n="";for(var r in a)n+=a[r].documento+t+a[r]["primer-nombre"]+t+a[r].apellido+t+a[r]["credit-card"]+t+a[r].tipo+t+a[r].telefono+t;var c=n.slice(0,-1),i=new File([c],"json-converted.txt",{type:"text/plain"});Object(p.saveAs)(i)}(e.state.infoFile,e.state.delimeter)},children:"Convertir JSON A TXT"})}),Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",onClick:function(){return function(e,t){for(var a,n=(a=(new DOMParser).parseFromString(e,"text/xml")).getElementsByTagName("cliente").length,r="",c=0;c<n;c++)r+=a.getElementsByTagName("documento")[c].childNodes[0].nodeValue+t+a.getElementsByTagName("primer-nombre")[c].childNodes[0].nodeValue+t+a.getElementsByTagName("apellido")[c].childNodes[0].nodeValue+t+a.getElementsByTagName("credit-card")[c].childNodes[0].nodeValue+t+a.getElementsByTagName("tipo")[c].childNodes[0].nodeValue+t+a.getElementsByTagName("telefono")[c].childNodes[0].nodeValue,c!==n-1&&(r+="".concat(t,"\n"));var i=new File([r],"xml-converted.txt",{type:"text/plain"});Object(p.saveAs)(i)}(e.state.infoFile,e.state.delimeter)},children:"Convertir XML A TXT"})})]}),Object(F.jsxs)(k.a,{justify:"center",gutter:30,children:[Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn btn-ciphed",onClick:this.decipheredHandler,children:"Decodificar Cifrado"})}),Object(F.jsx)(T.a,{className:"gutter-row",children:Object(F.jsx)(C.a,{type:"primary",className:"btn",onClick:this.jwtValidation,children:"Guardar JSON con JWT"})})]})]})]}),Object(F.jsxs)("div",{className:"App-body",children:[Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("h3",{children:"Contenido archivo de origen:"}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{className:"container-label",children:[Object(F.jsx)("label",{type:"text",children:this.state.infoFile}),Object(F.jsx)("br",{})]})]}),Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("h3",{children:"Contenido archivo generado:"}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{className:"container-label",children:[Object(F.jsx)("label",{type:"text",children:this.state.infoGenerated}),Object(F.jsx)("br",{})]})]}),Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("h3",{children:"Ver contenido cifrado:"}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{className:"container-label",children:[Object(F.jsx)("label",{type:"text",children:this.state.displayCifrado}),Object(F.jsx)("br",{})]})]})]})]})}}]),a}(n.Component),D=A;c.a.render(Object(F.jsx)(D,{}),document.getElementById("root"))}},[[432,1,2]]]);
//# sourceMappingURL=main.ebf4fdba.chunk.js.map